<h2 mat-dialog-title>Audit Logs</h2>
<mat-dialog-content>
    <div *ngIf="isLoading" class="loading-spinner">
        <mat-spinner diameter="40"></mat-spinner>
    </div>

    <div class="table-container" [class.hidden]="isLoading">
        <table mat-table [dataSource]="dataSource">

            <!-- Timestamp Column -->
            <ng-container matColumnDef="timestamp">
                <th mat-header-cell *matHeaderCellDef> Timestamp </th>
                <td mat-cell *matCellDef="let log"> {{log.created_at | date:'medium'}} </td>
            </ng-container>

            <!-- User Column -->
            <ng-container matColumnDef="user">
                <th mat-header-cell *matHeaderCellDef> User </th>
                <td mat-cell *matCellDef="let log"> {{log.username}} </td>
            </ng-container>

            <!-- Action Column -->
            <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef> Action </th>
                <td mat-cell *matCellDef="let log"> {{log.action}} </td>
            </ng-container>

            <!-- IP Column -->
            <ng-container matColumnDef="ip">
                <th mat-header-cell *matHeaderCellDef> IP Address </th>
                <td mat-cell *matCellDef="let log"> {{log.ip_address || '-'}} </td>
            </ng-container>

            <!-- Changes Column -->
            <ng-container matColumnDef="changes">
                <th mat-header-cell *matHeaderCellDef> Changes </th>
                <td mat-cell *matCellDef="let log">
                    <span class="changes-text">{{log.changes}}</span>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="5">No logs found</td>
            </tr>
        </table>

        <mat-paginator [pageSizeOptions]="[10, 25, 50]" showFirstLastButtons></mat-paginator>
    </div>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-button mat-dialog-close>Close</button>
</mat-dialog-actions>